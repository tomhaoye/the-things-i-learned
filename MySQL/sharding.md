# 分库分表需要解决的问题
- 事务问题
	- 方案一：分布式事务
		- 优点：交由数据可管理，简单有效
		- 缺点：性能代价高
	- 方案二：由应用程序和数据库共同控制
		- 原理：将一个跨多个数据库的分布式事务分拆成多各仅处于单个数据库上的小事务，并通过应用程序来总控各个小事务
		- 优点：性能好
		- 缺点：编码复杂

- 跨节点join问题
	- 普遍做法：分两次查询，第一次查出id，再发起氢气获取关联数据

- 跨节点count、order by、group by以及聚合函数
	- 在各节点得到结果后在应用程序进行合并
	
- 数据迁移、容量规划、扩容问题
	- 用对2的背书取余具有向前兼容的特性来分配数据，避免行级别的数据迁移
	
- 事务
	- 分布式事务
	- 基于best efforts IPC模式的事务
	- 事务补偿
	
- ID问题
	- UUID
	- 结合数据可维护一个sequence表
	- twitter的分布式自增ID算法snowflake
	
- 跨分片的排序分页
	- 各节点查询出数据再进行合并查询（可参考multi-database-pagination）
	
- 分库策略
	- 根据id范围
	- 根据数值取模
	
- 分库数量
	- 建议4-8个